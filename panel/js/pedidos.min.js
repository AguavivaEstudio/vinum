let pedidosVue=new Vue({el:"#tablaPedidos",data:{columns:[],rows:[],selectedRow:{},pagado:2,enviado:2,cancelado:0},methods:{initialize(){$.get("pedidosGetData.php",function(e){pedidosVue.columns=e.columns,pedidosVue.rows=e.rows,pedidosVue.rows.forEach(e=>{e.display=!e.cancelado,e.items=JSON.parse(e.items)}),setTimeout(function(){createDataTable(),$("input[type=checkbox]").css("display","block")},300)})},checkData(e,a){let o=0;$(event.target).prop("checked")&&(o=1),SubmitData("_updateChk.php?t=pedidos&c="+a+"&i="+e.id+"&v="+o,"","divError",!1),setTimeout(function(){"enviado"==a&&1==o&&$.get("../mailpedido.php?preference_id="+e.preference_id).done(function(e){console.log("Correo enviado correctamente")}).fail(function(e){console.log("Error al enviar el correo")})},1e3)},viewPedido(e){this.selectedRow=e,e.totalPedido=0,e.cantitadUnidades=0,e.items.forEach(a=>{a.total=a.precio*a.cantidad,e.totalPedido=e.totalPedido+a.total,e.cantitadUnidades=e.cantitadUnidades+a.cantidad}),$("#pedidoDetalle").modal("show")},filter(){this.rows.forEach(e=>{let a=!0;a=a&&(2==this.pagado||1==this.pagado&&e.pagado||0==this.pagado&&!e.pagado),a=a&&(2==this.enviado||1==this.enviado&&e.enviado||0==this.enviado&&!e.enviado),a=a&&(2==this.cancelado||1==this.cancelado&&e.cancelado||0==this.cancelado&&!e.cancelado),e.display=a})}}});pedidosVue.initialize();