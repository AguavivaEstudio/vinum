function createDataTable(){$(".dataTable").DataTable({order:[[1,"desc"]],lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],stateSave:!0,language:{lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No hay datos",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay datos",infoFiltered:"(filtrado de _MAX_ registros)",search:"",paginate:{previous:"‹",next:"›"},aria:{paginate:{previous:"Previous",next:"Next"}}},responsive:!0,columnDefs:[{width:"10px",targets:0}]})}function setNavVarPadding(){height=$("#divMenu .navbar-brand h3").css("height"),height=height.replace("px",""),height=parseInt(height)+10,height+="px",$("#divMenu .navbar-brand h3").css("padding-left",height)}function changePasswordReset(){$("#password").val(""),$("#password2").val(""),$("#modalChangePassForm .alert").addClass("hidden"),$("#modalChangePassForm .buttons").removeClass("hidden"),$("#modalChangePassForm .alert-danger").html($("#modalChangePassForm .alert-danger").attr("data-text"))}function changePasswordSubmit(){pass1=$("#password").val(),pass2=$("#password2").val(),$("#modalChangePassForm .alert").addClass("hidden"),$("#modalChangePassForm .alert-danger").html($("#modalChangePassForm .alert-danger").attr("data-text")),""==pass1?($("#modalChangePassForm .alert-danger").html($("#modalChangePassForm .alert-danger").attr("data-text-empty")),$("#modalChangePassForm .alert-danger").removeClass("hidden")):pass1==pass2?SubmitData("_changePassword.php",$("#modalChangePassForm").serialize(),"",!1)?($("#modalChangePassForm .alert-success").removeClass("hidden"),$("#modalChangePassForm .buttons").addClass("hidden")):($("#modalChangePassForm .alert-danger").html($("#modalChangePassForm .alert-danger").attr("data-text-error")),$("#modalChangePassForm .alert-danger").removeClass("hidden")):$("#modalChangePassForm .alert-danger").removeClass("hidden")}function sortData(e){$(e).sortable({onDrop:function(t,a,o){o(t,a),$(e).find("li").each(function(){li=$(this),id=li.attr("data-rowId"),order=li.index()+1,bRequestOk=SubmitData("_saveOrder.php?id="+id+"&order="+order,"","",!1)})}})}function launchEditor(e){return oFile=document.getElementById($(e).attr("data-image")),id=$(oFile).attr("id"),src=$(oFile).attr("src"),featherEditor.launch({image:id,url:src}),!1}function newProductionDetail(e){prod=$(e).attr("data-prodId"),id=$(e).attr("data-id"),td=$(e).attr("data-td"),tn=$(e).attr("data-tn"),""==tn?document.location.href="contentDetail.php?t="+td+"&p="+prod+"&id="+id:document.location.href="contentDetail.php?t="+td+"&p="+prod+"&id="+id+"&tn="+tn}function shoWHideControls(e){value=$(e).val(),$(".tipoVideo").addClass("hidden"),$(".tipoTxt").addClass("hidden"),$(".tipoLink").addClass("hidden"),$(".tipoDestacado").addClass("hidden"),$(".tipoImagen").addClass("hidden"),"video"==value&&$(".tipoVideo").removeClass("hidden"),"text"!=value&&"imagen|text"!=value||$(".tipoTxt").removeClass("hidden"),"video"==value&&$(".tipoVideo").removeClass("hidden"),"url"==value&&$(".tipoLink").removeClass("hidden"),"image"==value&&$(".tipoImagen").removeClass("hidden")}function editContent(e){tableId=$(e).attr("data-tableId"),rowId=$(e).attr("data-id"),document.location.href="content.php?t="+tableId+"&id="+rowId}function editCustom(e){tableId=$(e).attr("data-tableId"),rowId=$(e).attr("data-id"),clientId=$(e).attr("data-cliente"),document.location.href="content.php?t="+tableId+"&id="+rowId+"&cliente="+clientId}function uploadFile(e){$("#modalUpload .dz-preview").remove(),tableName=$(e).attr("data-table"),columnName=$(e).attr("data-column"),rowId=$(e).attr("data-id"),$("#modalUpload input[name='tableName']").val(tableName),$("#modalUpload input[name='columnName']").val(columnName),$("#modalUpload input[name='rowId']").val(rowId),bRequestOk=SubmitData("_getFileList.php?tableName="+tableName+"&columnName="+columnName+"&rowId="+rowId,"","fileList",!1),$("#modalUpload").modal("show"),$(".externalLink").attr("target","_blank")}function updateFileList(){$("#modalUpload .dz-preview").remove(),tableName=$("#modalUpload input[name='tableName']").val(),columnName=$("#modalUpload input[name='columnName']").val(),rowId=$("#modalUpload input[name='rowId']").val(),bRequestOk=SubmitData("_getFileList.php?tableName="+tableName+"&columnName="+columnName+"&rowId="+rowId,"","fileList",!1)}function checkData(e){var t=$(e).attr("data-TABLE_NAME"),a=$(e).attr("data-COLUMN_NAME"),o=$(e).attr("data-rowId");$(e).is("input[type=checkbox]")?e.checked?checked=1:checked=0:$(e).hasClass("checked_0")?($(e).addClass("checked_1"),$(e).removeClass("checked_0"),$(e).children("label").html($(e).attr("data-visible")),checked=1):($(e).addClass("checked_0"),$(e).removeClass("checked_1"),$(e).children("label").html($(e).attr("data-hidden")),checked=0),bRequestOk=SubmitData("_updateChk.php?t="+t+"&c="+a+"&i="+o+"&v="+checked,"","divError",!1)}function deleteRow(e){if(confirm("Are you sure about that???")){var t=$(e).attr("data-table"),a=$(e).attr("data-rowId");bRequestOk=SubmitData("_delete.php?t="+t+"&i="+a,"","divError",!1),1==bRequestOk&&($(e).hasClass("deletePopUp")?$(e).parent().parent().parent().remove():document.location.href=document.location.href)}}function addRow(e){var t=$(e).attr("data-table");document.location.href="add.php?t="+t}function deleteSelected(e){if(bRequestAll=!0,confirm("Are you sure about that???")){var t=$(e).attr("data-table");$("table").each(function(){oTable=$(this),oTable.attr("data-table")==t&&oTable.find(".chkDeleteMultiple:checked").each(function(){sid=$(this).attr("data-id"),bRequestOk=SubmitData("_delete.php?t="+t+"&i="+sid,"","divError",!1),bRequestAll=bRequestAll&&bRequestOk})}),1==bRequestAll&&(document.location.href=document.location.href)}}function SubmitData(e,t,a,o){var d;new Object;return d=!0,$.ajax({type:"POST",url:e,dataType:"html",cache:!1,data:t,error:function(){d=!1,alert("Error al cargar la página")},success:function(e){""!=a&&(document.getElementById(a).innerHTML=e),o&&alert(e)}}),d}function modalEspecies(e){project=$(e).attr("data-id"),bRequestOk=SubmitData("_includesCustomEspecies.php?method=get&project="+project,"","especiesSeleccionadas",!1),$("#modalEspecies").modal("show")}function checkEspecie(e){var t=$(e).attr("data-proyecto"),a=$(e).attr("data-especie");e.checked?checked=1:checked=0,bRequestOk=SubmitData("_includesCustomEspecies.php?method=set&project="+t+"&especie="+a+"&value="+checked,"","",!1)}function setFileComment(e,t){$.ajax({type:"POST",url:"_setFileComment.php",dataType:"html",cache:!1,data:{id:e,comment:t},error:function(){alert("Error al guardar el copete")},success:function(e){}})}function editImage(e){console.log(e),document.location.href="editImage.php"}$(document).ready(function(){if($(".modalAutoOpen").modal("show"),$(".externalLink").attr("target","_blank"),0===$("#tablaPedidos").length&&createDataTable(),$("textarea").ckeditor(),$(document).on("click","a[data-target='_blank']",function(){$(this).attr("target","_blank")}),$(document).on("click",".clsPublish",function(){checkData(this)}),$(document).on("click",".delete",function(){deleteRow(this)}),$(document).on("click",".newItem",function(){addRow(this)}),$(document).on("click",".btnDeleteMultiple",function(){deleteSelected(this)}),$(document).on("click",".fa-upload",function(){uploadFile(this)}),$(document).on("click",".fa-picture-o",function(){uploadFile(this)}),$(document).on("click",".editEspecies",function(){modalEspecies(this)}),$(document).on("click",".chkEspecie",function(){checkEspecie(this)}),$(document).on("click",".editContent",function(){editContent(this)}),$(document).on("click",".editCustom",function(){editCustom(this)}),$(document).on("click","ol.sortable",function(){sortData(this)}),$(document).on("click",".editFile",function(){launchEditor(this)}),$(document).on("click","#btnCancellForm",function(){history.back(1)}),$(document).on("click",".newItemDetail",function(){newProductionDetail(this)}),$(document).on("click",".fileUploaded",function(){editImage(this)}),$(document).on("change","#type",function(){shoWHideControls(this)}),$(document).on("hover",".newItem",function(){$(".btnDeleteMultiple").hide(),alert(1)}),shoWHideControls($("#type")),$(".newItem").hover(function(){$(".btnDeleteMultiple").addClass("hidden")},function(){$(".btnDeleteMultiple").removeClass("hidden")}),$(document).on("click","#modalChangePassSubmit",function(e){e.preventDefault(),changePasswordSubmit()}),$("#modalChangePass").on("hidden.bs.modal",function(e){changePasswordReset()}),$(window).resize(function(){setNavVarPadding()}),setNavVarPadding(),$("input[type='search']").attr("placeholder","   Buscar..."),$("#dropzone")[0]){var e=new Dropzone("#dropzone");e.on("success",function(){updateFileList()})}});